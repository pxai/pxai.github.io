---
layout: post
title: "Autowiring en Spring" 
date: 2013-07-14 17:51:58 
categories: coding
---
<p>
	&nbsp;</p>
<div>
	Conforme los proyectos se complican puede que gestionar el fichero XML donde se hilan las instancias se convierta en una tarea demencial. Una forma de paliar eso es utilizar el autowiring, lo cual nos permite mediante varios tipos de convenciones hacer que las instancias se asignen solas de forma autom&aacute;tica.</div>
<div>
	&nbsp;</div>
<div>
	Aqu&iacute; vamos a ver c&oacute;mo se podr&iacute;a hacer el autowire a trav&eacute;s del nombre de bean en el fichero xml. Es algo bastante sencillo y para eso rescataremos aquel proyecto&nbsp;llamado Javamon, en este caso retocado y traducido al english.&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Para montar el chiringuito usando Maven he creado en eclipse un proyecto Spring :</div>
<div>
	<em>File .. &gt; New .. &gt; Project/Other &gt; Spring &gt; Spring project &gt; Simple projects &gt; Simple Spring Maven</em></div>
<div>
	&nbsp;</div>
<div>
	&iquest;Para qu&eacute; hacerlo a mano si eclipse te lo da bien hecho? Eso s&iacute;, versi&oacute;n Kepler y con el plugin de Spring como expliqu&eacute; en otro art&iacute;culo.</div>
<div>
	&nbsp;</div>
<div>
	Ese proyecto te mete bastantes cosas, y algunas dependencias se pueden quitar como hibernate. Puedes <a href="https://code.google.com/p/erps-2dam-4vientos/source/browse/trunk/Javamon/">descargarte el c&oacute;digo de googlecode</a>.</div>
<div>
	&nbsp;</div>
<div>
	El proyecto javamon consiste en una clase combate que carga dos instancias de la clase Javamon y las hace pelear. Todo ello se maneja desde&nbsp;una clase principal, que para la ocasi&oacute;n hemos &quot;Springizado&quot;.</div>
<div>
	&nbsp;</div>
<div>
	Bueno, vamos a ver qu&eacute; aspecto tienen las clases, de abajo a arriba:</div>
<div>
	&nbsp;</div>
<div>
	<strong>La clase Javamon</strong></div>
<div>
	<span style="font-family:courier new,courier,monospace;">package info.pello.maven.spring.Javamon;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">import java.util.Random;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* represents a Javamon creature</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @author Pello</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @greetz Vigor jauna, 2DAMeko ikaslea</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public class Javamon {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private String name;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private int strength;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private int defence;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private int agility;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private int life;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private Random random = new Random();</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* constructor</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @param nombre</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public Javamon(String nombre) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; this.name = nombre;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; initAttributes();</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* intis javamon attributes randomly</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; private void initAttributes () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; int pointsToDeal = 18;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; // to what attrib we give the points in each loop</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; int whatAttrib = 0;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; // points to give at most en each loop</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; int max = 0;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; // first they are 0</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; strength = defence = agility = 0;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; while (pointsToDeal &gt; 0) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; whatAttrib = random.nextInt(3);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch (whatAttrib) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 0:</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strength++;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 1:</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defence++;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 2:</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; agility ++;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default: break; // esto por man&iacute;a. nevermind</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // y vamos restando...</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pointsToDeal--;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; // Y la vida depender&aacute; de F y D</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; life = strength + defence + 6;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* an initiative roll</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int initiative () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return agility + random.nextInt(6);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* an attacking roll</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int attack () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return strength + random.nextInt(6); &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* a defending roll</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int defend () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return ((agility + defence) /2 ) + random.nextInt(6);</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* javamon status description</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public String status (){</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return name +&quot;(&quot; + life + &quot;)| S:&quot; + strength + &quot;| D:&quot; + defence + &quot;| A:&quot; + agility;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return the name</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public String getName() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return name;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return the strength</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int getStrength() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return strength;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return the defence</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int getDefence() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return defence;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return the agility</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int getAgility() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return agility;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @return the life</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public int getLife() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; return life;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;* @param life</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public void setLife(int life) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; this.life = life;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	<strong>La clase Combat</strong></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">package info.pello.maven.spring.Javamon;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">* Represents a Javamon combat</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">* @author Pello</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">* greetz lafu</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public class Combat {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;private Javamon javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;private Javamon javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;private int assaults = 0;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">* Class constructor</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;public Combat () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * this method performs combat</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;public void combat () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;Javamon first, second;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;do {</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;assaults++;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Depending on initiative roll one attacks and the other defends</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (javamon1.initiative() &lt; javamon2.initiative()) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;first = javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;second = javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;first = javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;second = javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(first.status() +&quot; -&gt; attacks -&gt; &quot;+ second.status());</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;assault(first, second);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;// while both are alive they keep on fighting</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;} while (first.getLife() &gt; 0 &amp;&amp; second.getLife() &gt; 0);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * represents one assault of the combar</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">* the first parameter is the attacker</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * @param jm1</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * @param jm2</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;private void assault (Javamon jm1, Javamon jm2) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;// Assault damage will be one attack minus defender defense roll</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;int damage = (jm1.attack() - jm2.defend());</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;// In case of damage we decrease defender life points</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;if (damage &gt; 0) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(jm1.getName() + &quot; -&gt; makes &quot; + damage + &quot; damage to -&gt; &quot; + jm2.getName());</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jm2.setLife(jm2.getLife() - damage);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;} else {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(jm2.getName() + &quot; stops the attack!!&quot;);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * outcome of the combat</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; * @return the winner javamon</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;public Javamon outcome () {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;System.out.println(&quot;Total &quot; + assaults + &quot; assaults&quot;);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;if (javamon1.getLife() &gt; 0) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;} else {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;}</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @return the javamon1</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public Javamon getJavamon1() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">return javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @param javamon1 the javamon1 to set</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public void setJavamon1(Javamon javamon1) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">this.javamon1 = javamon1;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @return the javamon2</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public Javamon getJavamon2() {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">return javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @param javamon2 the javamon2 to set</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public void setJavamon2(Javamon javamon2) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">this.javamon2 = javamon2;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	<strong>El programa principal</strong></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">package info.pello.maven.spring.Javamon;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">import org.springframework.context.ApplicationContext;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">import org.springframework.context.support.ClassPathXmlApplicationContext;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* Main App</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @author Pello Altadill</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;* @greetz u and to all DAM1 sick people, go and get a life</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp;*/</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">public class App {</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; public static void main (String args[]) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">ApplicationContext context = new ClassPathXmlApplicationContext(&quot;javamon.xml&quot;);</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">Combat combat = (Combat) context.getBean(&quot;combat&quot;);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; combat.combat();</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(&quot;And the winner is: &quot; + combat.outcome().getName());</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(&quot;Thanks for playing javamon&quot;);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; }</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">}</span></div>
<div>
	&nbsp;</div>
<div>
	<strong>javamon.xml</strong></div>
<div>
	El fichero de spring donde se hace el autowiring por nombre:</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">http://www.springframework.org/schema/beans/spring-beans-3.2.xsd&quot;&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!-- We instantiate two javamons --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;<strong>javamon1</strong>&quot; class=&quot;info.pello.maven.spring.Javamon.Javamon&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;constructor-arg value=&quot;Pikachu&quot; /&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;<strong>javamon2</strong>&quot; class=&quot;info.pello.maven.spring.Javamon.Javamon&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;constructor-arg value=&quot;Bulbasur&quot; /&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!--&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">We create a combat autowiring previous javamon by name -</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">Combat class has two attributes called javamon1 and javamon2</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">With autowiring they will be set automagically</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">--&gt;<span class="Apple-tab-span" style="white-space: pre; "> </span></span></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;combat&quot; class=&quot;info.pello.maven.spring.Javamon.Combat&quot;&nbsp;</span></strong></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">autowire=&quot;byName&quot; &gt;</span></strong></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/beans&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Hay cuatro tipos de autowiring:</div>
<div>
	- Por nombre (byName): es la que acabamos de ver en este ejemplo.</div>
<div>
	- Por tipo (byType): Spring tratar&aacute; de encontrar una clase cuyo tipo se ajuste a lo que necesitamos.</div>
<div>
	- Por constructor : Spring busca los beans que se ajusten al constructor. En este caso NO podiamos usarlo porque ten&iacute;amos dos par&aacute;metros del mismo tipo.</div>
<div>
	- autodetect: primero trata de aplicar autowiring por constructor y si no lo consigue lo hace por tipo.</div>
<div>
	&nbsp;</div>
<div>
	Si lo que queremos es evitar usar el fichero XML entonces ya podemos usar anotaciones en las propias clases. Eso ser&aacute; en otra ocasi&oacute;n.</div>

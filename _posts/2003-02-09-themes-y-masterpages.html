---
layout: post
title: "Themes y MasterPages"
date: 2003-02-09 08:42:00
categories: coding
---

<h3>3.1 Themes</h3>Los themes son necesarios porque para personalizar algunos controles de .NET no basta con las hojas de estilos.<br /><br />Para guardar el theme debe crearse una carpeta llamada App_Theme y dentro de ella otra carpeta por cada theme. Dentro de los themes podemos tener tantos archivos skin como queramos.<br /><br />Los ficheros de skin contienen listas de controles web personalizados: por ejemplo, cajas de texto de determinado color.<br /><br /><span style="font-weight: bold;">AplicaciÃ³n de themes</span><br style="font-weight: bold;" />Para aplicarlos hay distintas maneras. Para aplicar un theme por pÃ¡gina debemos meter en la directiva &lt;%@ Page el atributo Theme:<br />&lt;%@ Page Language=... Theme=&quot;SuperTheme&quot; %&gt;<br /><br />Para establecer el theme en toda la web a travÃ©s del web.config:<br /><span style="font-family: courier new,courier,monospace;">...</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;system.web&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;pages theme=&quot;SuperTheme&quot; /&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/system.web&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">...<br /><br style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" /><span style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">En la programaciÃ³n tambiÃ©n podemos cambiar el theme al vuelo, pero hay que hacerlo en la fase Page_PreInit</span>:<br /><br />protected void Page_PreInit (object sender, EvenArgs e)<br />{<br />// Vamos a suponer que establecemos un theme a travÃ©s de una variable de sesiÃ³n<br />if (Session[&quot;Theme&quot;] == null)<br />{<br />// no hay theme, o dejamos en blanco o ponemos uno por defecto<br />Page.Theme = &quot;&quot;;<br />}<br />else<br />{<br />Page.Theme = (String)Session[&quot;MiTema&quot;];<br />}<br />}<br /></span><br /><span style="font-weight: bold;">Estilos</span><br />Se pueden incluir ficheros css para que los themes tengan estilos. Los ficheros deben meterse en la carpeta del theme y luego hay que hacer un pequeÃ±o cambio en la pÃ¡gina para que incluya el css: convertir el head en un control de servidor poniÃ©ndole en runat.<br /><span style="font-family: courier new,courier,monospace;">...</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;head runat=&quot;server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/head&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">...</span><br />En caso de conflicto entre las propiedades de un control y el theme, el theme gana.<br /><br />
<h3>3.2 Master Pages</h3> Las master pages son pÃ¡ginas asp.net que sirven como plantilla a una web. La master page debe crearse como un nuevo elemento o a partir de una pÃ¡gina ya hecha. EstÃ¡ pÃ¡gina se personaliza y se pone a punto por un lado y por otro se establecen los <span style="font-weight: bold;">placeholders</span>, es decir lugares de la pÃ¡gina donde meteremos contenido cambiante. Para agregar una masterpage, entre todas las opciones debemos seleccionar la de &quot;pÃ¡gina principal&quot;.<br /><br />Para personalizar la pÃ¡gina podemos meter diseÃ±o de bloques, hojas de estilo y todo lo habitual. AquÃ­ tenemos parte de una masterpage. Podemos ver que cambia la declaraciÃ³n y que se meten placeholders como el del title:<br /><span style="font-family: courier new,courier,monospace;">&lt;%@ Master Language=&quot;C#&quot; AutoEventWireup=&quot;true&quot; CodeFile=&quot;MasterPage.master.cs&quot; Inherits=&quot;MasterPage&quot; %&gt;</span><br style="font-family: courier new,courier,monospace;" /><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;head runat=&quot;server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;"> &lt;title&gt; &lt;asp:ContentPlaceHolder id=&quot;head&quot; runat=&quot;server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;"> &lt;/asp:ContentPlaceHolder&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;"> &lt;/title&gt;</span><br style="font-family: courier new,courier,monospace;" /><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;"> &lt;link href=&quot;StyleSheet.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/head&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;body&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">...</span><br /><br />Lo siguiente es crear pÃ¡ginas de contenido. Se pueden crear a mano y luego personalizar (hay que quitar etiquetas &lt;body&gt; etc...), pero a travÃ©s de visual studio lo hace automÃ¡tico y creando todos las etiquetas necesarias.<br /><br />Para eso agregamos una nueva pÃ¡gina y seleccionamos el checkbox de pÃ¡gina principal. AhÃ­ seleccionamos una master page y el visual nos crea una pÃ¡gina con etiquetas Content. Esas Content se corresponden con los placeholders de la master:<br /><span style="font-family: courier new,courier,monospace;">&lt;%@ Page Language=&quot;C#&quot; MasterPageFile=&quot;~/MasterPage.master&quot; AutoEventWireup=&quot;true&quot; CodeFile=&quot;Inicio.aspx.cs&quot; Inherits=&quot;Inicio&quot; Title=&quot;PÃ¡gina sin tÃ­tulo&quot; %&gt;</span><br style="font-family: courier new,courier,monospace;" /><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;asp:Content ID=&quot;Content1&quot; ContentPlaceHolderID=&quot;head&quot; Runat=&quot;Server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">Este es el inicio</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/asp:Content&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;asp:Content ID=&quot;Content2&quot; ContentPlaceHolderID=&quot;ContentPlaceHolder1&quot; Runat=&quot;Server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;h1&gt;Inicio&lt;/h1&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">Este es el inicio</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/asp:Content&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;asp:Content ID=&quot;Content3&quot; ContentPlaceHolderID=&quot;pie&quot; Runat=&quot;Server&quot;&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">PÃ¡gina generada superRÃ¡pido</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/asp:Content&gt;</span><br /><br />Si desde cÃ³digo quisieramos alterar partes de la pÃ¡gina master, en la clase de la master tendrÃ­amos que meter mÃ©todos set/get para hacerlos accesibles.<br /><br />Puede cambiarse la master page al vuelo desde cÃ³digo usando la propiedad: Page.Master<br />Tambien en el web.config se puede establecer la pÃ¡gina master:<br /><span style="font-family: courier new,courier,monospace;">...</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;system.web&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;pages masterPageFile=&quot;SuperMaster.master&quot; /&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">&lt;/system.web&gt;</span><br style="font-family: courier new,courier,monospace;" /><span style="font-family: courier new,courier,monospace;">...</span><br style="font-family: courier new,courier,monospace;" /><br />

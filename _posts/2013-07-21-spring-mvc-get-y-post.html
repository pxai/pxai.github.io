---
layout: post
title: "Spring MVC get y post" 
date: 2013-07-21 22:25:21 
categories: coding
---
<p>
	&nbsp;</p>
<div>
	<a href="http://www.pello.info/blog/creando-un-proyecto-web-spring-mvc">En un post</a> ya fui adelantando c&oacute;mo se las gasta el framework MVC de Spring. Ahora vamos a ir al detalle</div>
<div>
	con una serie de ejemplos concretos: paso de par&aacute;metros por GET, por POST con formularios, redirecciones y claro est&aacute;</div>
<div>
	toda la persistencia de la mano de hibernate. El proyecto con el que hago pruebas se llama jomework, es una vieja idea</div>
<div>
	que consiste en que poner tareas de programaci&oacute;n con unos test unitarios asociados y que los alumnos suban</div>
<div>
	su fichero con la tarea y el programa compile y testee para ver si la tarea es correcta. En fin, la cosa es que</div>
<div>
	en este ejemplo se a gestiona en una aplicaci&oacute;n web una tabla llamada Users.</div>
<div>
	&nbsp;</div>
<div>
	Una aplicaci&oacute;n Spring MVC no es m&aacute;s que la t&iacute;pica aplicaci&oacute;n web de java con su web.xml en la que Spring toma</div>
<div>
	el control con un servlet especial que corta todo el bacalao.</div>
<div>
	&nbsp;</div>
<h3>
	<strong>web.xml</strong></h3>
<div>
	Esto que ves en el ficher web.xml te lo genera practicamente el eclipse si creas un proyecto web spring:</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;display-name&gt;jomework&lt;/display-name&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&lt;!--</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;- Location of the XML file that defines the root application context.</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;- Applied by ContextLoaderListener.</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;--&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;context-param&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;param-value&gt;classpath:spring/application-config.xml&lt;/param-value&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;/context-param&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;listener&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;/listener&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;!--</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;- Servlet that dispatches request to registered handlers (Controller implementations).</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;--&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;servlet&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;init-param&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;param-value&gt;/WEB-INF/mvc-config.xml&lt;/param-value&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/init-param&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;/servlet&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;servlet-mapping&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;/servlet-mapping&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/web-app&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Y realmente, salvo que quieras cambiar el tipo de servlet y el resolver de los views, una vez montado lo dejas y listo.</div>
<div>
	El ciclo de vida de una petici&oacute;n web en Spring MVC se puede apreciar en este diagrama:</div>
<div>
	<img alt="" src="http://java4developers.com/wp-content/uploads/2011/09/springmvclifecycle.jpg" style="width: 300px; height: 179px; " /></div>
<div>
	De todos esos componentes, los &uacute;nicos que debemos programar son las clases Controller y los vies que generalmente</div>
<div>
	ser&aacute;n jsps con tags de spring, jstl, you name it,...</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<h3>
	mvc-config.xml</h3>
<div>
	Todos esos programas que se mencionan en el fichero web.xml se cargan de un fichero xml que contiene algunos beans esenciales.</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;!-- We&#39;ll autodiscover beans and instantiate them --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;context:component-scan base-package=&quot;info.pello.jomework.controllers&quot;/&gt; &nbsp;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;!-- With this all the content from resources dir will</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;be treated as static content: js, css, images, &nbsp;--&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/resources/&quot; /&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;!-- We&#39;ll be using annotated controller classes --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;mvc:annotation-driven /&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;!-- We define the class to manage the views</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;This ones just appends the name with the prefix and the suffix.</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;For exaple, if the Controller returns &quot;hello&quot;, the It resolves to</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;prefix/hello/suffix, in this case: /WEB-INF/views/hello.jsp</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;--&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Example: a logical view name of &#39;showMessage&#39; is mapped to &#39;/WEB-INF/jsp/showMessage.jsp&#39; --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;/&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/bean&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/beans&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<h3>
	application-config.xml</h3>
<div>
	Y aparte se crea otro fichero que ya contiene lo que podemos esperar en un fichero de configuraci&oacute;n de Spring,</div>
<div>
	con todo el tema de hibernate, etc...</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/beans/spring-beans.xsd</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/context&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/context/spring-context.xsd</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;http://www.springframework.org/schema/tx</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; http://www.springframework.org/schema/tx/spring-tx-3.0.xsd&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;!-- Uncomment and add your base-package here:</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;context:component-scan</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; base-package=&quot;org.springframework.samples.service&quot;/&gt; &nbsp;--&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!-- We define a Bean for datasource --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/jomework&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!--</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">We create Hibernate&#39;s SessionFactory bean</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">to get a Hibernate session in our program</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">If you pay attention you&#39;ll realize that this bean config</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">is somehow like the hibernate.cfg.xml configuration. We don&#39;t need</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">to create that file now.</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">--&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;property name=&quot;mappingResources&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;list&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;value&gt;spring/Assignment.hbm.xml&lt;/value&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;value&gt;spring/User.hbm.xml&lt;/value&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/list&gt;﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/property&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;property name=&quot;hibernateProperties&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;props&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;prop key=&quot;dialect&quot;&gt;org.hibernate.dialect.HSQLDialect&lt;/prop&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/props&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/property&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;assignmentDAO&quot; class=&quot;info.pello.jomework.AssignmentDAO&quot; &gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;bean id=&quot;userDAO&quot; class=&quot;info.pello.jomework.UserDAO&quot; &gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/bean&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/beans&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&iquest;Qu&eacute; es ese &quot;Model&quot; que pasa desde el Controller al Dispather Servlet?&nbsp;</div>
<div>
	Es la crema. En lugar de pasar valores por el cl&aacute;sico request, o por atributos extra&ntilde;os, se utiliza una estructura Map&lt;String, Object&gt; model en la que se mete cualquier cosa. Por ejemplo, el resultado de una consulta a un DAO. Ese model se puede usar luego en el JSP para renderizar tal y como se ve en los ejemplos de users.jsp y de userdetail.jsp.</div>
<div>
	&nbsp;</div>
<div>
	Tambi&eacute;n se puede hacer lo mismo en sentido inverso, desde el jsp cargar una Instancia de User dentro del modelo para usarla luego en el controlador, tal y como se ve en el ejemplo de newuser.jsp.</div>
<div>
	&nbsp;</div>
<div>
	Veamos caso por caso</div>
<div>
	&nbsp;</div>
<h3>
	users.jsp</h3>
<div>
	Vale, en la aplicaci&oacute;n llegamos a esta url poniendo http://localhost/jomework/users</div>
<div>
	Nuestra clase Controller es la que se encarga de la petici&oacute;n /users. Lo que hace es</div>
<div>
	usar el DAO de users, cargar todos los registros dentro del model y pasar ese model a este view</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!-- No pueden convivir c &amp; sgf? da error y no arranca --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;http://www.springframework.org/tags&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!DOCTYPE html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;head&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;meta charset=&quot;utf-8&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;title&gt;Jomework :: Users&lt;/title&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/head&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;header&gt;Users&lt;/header&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;article&gt;&lt;h2&gt;${greet}&lt;/h2&gt;&lt;/article&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;nav&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/assignments&quot; /&gt;&quot; title=&quot;View Users&quot;&gt;View assigments&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/&quot; /&gt;&quot; title=&quot;View users&quot;&gt;View users&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/new&quot; /&gt;&quot; title=&quot;New user&quot;&gt;New user&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/nav&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;ul&gt;﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;c:forEach items=&quot;${users}&quot; &nbsp;var=&quot;user&quot; &gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;b&gt;${user.login}&lt;/b&gt; ${user.description}</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/detail?iduser=${user.id}&quot; /&gt;&quot; title=&quot;Detailed info&quot;&gt; see detail&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/c:forEach&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/html&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	En la clase <strong>UserController</strong> el view lo manda este m&eacute;todo:</div>
<div>
	&nbsp;</div>
<div>
	﻿ <span style="font-family:courier new,courier,monospace;">&nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * handles default /users or /users/show</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * optional get parameter: url?user=foo</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @param model</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @return the name of the view to show</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * RequestMapping({&quot;/users&quot;,&quot;/users/show&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;@RequestMapping(method=RequestMethod.GET,value={&quot;/users&quot;,&quot;/users/show&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;public String showUsers(Map&lt;String, Object&gt; model) {</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;List&lt;User&gt; users = this.userDAO.getUsers();</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;model.put(&quot;users&quot;, users);</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;// We return view name</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;return &quot;users&quot;;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;}</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<h3>
	userdetail.jsp</h3>
<div>
	A esta p&aacute;gina llegamos poniendo: http://localhost/jomework/users/detail?iduser=3</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!-- No pueden convivir c &amp; sgf? da error y no arranca --&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;http://www.springframework.org/tags&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!DOCTYPE html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;head&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;meta charset=&quot;utf-8&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;title&gt;Jomework :: User detail&lt;/title&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/head&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;header&gt;User detail&lt;/header&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;article&gt;&lt;h2&gt;User details: ${user.login}&lt;/h2&gt;&lt;/article&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;nav&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/assignments&quot; /&gt;&quot; title=&quot;View Users&quot;&gt;View assigments&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/&quot; /&gt;&quot; title=&quot;View users&quot;&gt;View users&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/new&quot; /&gt;&quot; title=&quot;New user&quot;&gt;New user&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/nav&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;&lt;b&gt;Login&lt;/b&gt;${user.login}&lt;/li&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;&lt;b&gt;Password:&lt;/b&gt;${user.password}&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;&lt;b&gt;Description&lt;/b&gt;${user.description}&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/html&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	En la clase <strong>UserController</strong> el view lo manda este m&eacute;todo, vemos c&oacute;mo se recoge el par&aacute;metro GET</div>
<div>
	&nbsp;<span style="font-family:courier new,courier,monospace;"> /**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * handles default /users/detail?user=id</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * optional get parameter: url?user=foo</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @param model</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @return the name of the view to show</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * RequestMapping({&quot;/users/detail&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;@RequestMapping(method=RequestMethod.GET,value={&quot;/users/detail&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;public String userDetail(@RequestParam(value=&quot;iduser&quot;, defaultValue=&quot;&quot;, required=true) Long id,Map&lt;String, Object&gt; model) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;System.err.println(&quot;Parameter: &quot; + id);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;User user = this.userDAO.getUsersById(id);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;model.put(&quot;user&quot;, user);</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;// We return view name</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;return &quot;userdetail&quot;;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;}</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<h3>
	newuser.jsp</h3>
<div>
	&nbsp;</div>
<div>
	Aqu&iacute; es donde primero mostramos un formulario cuyos campos Spring va a asociar a una instancia de la clase User,</div>
<div>
	y luego lo procesamos en el controlador. Cada cosa en m&eacute;todo distinto del controlador.</div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;http://www.springframework.org/tags&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ taglib prefix=&quot;sf&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;!DOCTYPE html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;html&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;head&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;meta charset=&quot;utf-8&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;title&gt;Jomework :: Users&lt;/title&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/head&gt;&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;header&gt;Users&lt;/header&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;article&gt;&lt;h2&gt;${greet}&lt;/h2&gt;&lt;/article&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;nav&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/assignments&quot; /&gt;&quot; title=&quot;View Users&quot;&gt;View assigments&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/&quot; /&gt;&quot; title=&quot;View users&quot;&gt;View users&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;a href=&quot;&lt;s:url value=&quot;/users/new&quot; /&gt;&quot; title=&quot;New user&quot;&gt;New user&lt;/a&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/li&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/ul&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/nav&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;sf:form method=&quot;post&quot; modelAttribute=&quot;user&quot;&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;fieldset&gt;&lt;legend&gt;New User&lt;/legend&gt;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;label for=&quot;login&quot;&gt;Login&lt;/label&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;sf:input path=&quot;login&quot; &nbsp;/&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;sf:input path=&quot;password&quot; /&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;label for=&quot;description&quot;&gt;Description&lt;/label&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;sf:textarea &nbsp;path=&quot;description&quot; /&gt;&lt;br /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;sf:button /&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;&lt;/fieldset&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;&lt;/sf:form&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;&lt;/body&gt;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&lt;/html&gt;</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	En la clase <strong>UserController</strong> el view lo manda este m&eacute;todo:</div>
<div>
	Primero sacamos el formulario as&iacute;:</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * handles /usera/new</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * redirects to new user form</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @param model</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @return the name of the view to show</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * RequestMapping({&quot;/users&quot;,&quot;/users/new&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;@RequestMapping(method=RequestMethod.GET,value={&quot;/users/new&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;public String newUser(Map&lt;String, Object&gt; model) {</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;// We&#39;ll user an User entity</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;model.put(&quot;user&quot;, new User());</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;// We return view name</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;return &quot;newuser&quot;;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;}</span></div>
<div>
	&nbsp;</div>
<div>
	Y el formulario se procesa capturando el POST con este otro m&eacute;todo:</div>
<div>
	<span style="font-family:courier new,courier,monospace;">/**</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * handles POST</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @param model</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * @return the name of the view to show</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; * RequestMapping({&quot;/users&quot;,&quot;/users/show&quot;})</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; */</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;@RequestMapping(method=RequestMethod.POST)</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;public ModelAndView saveUser(User user) {</span></div>
<div>
	&nbsp;</div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;System.err.println(&quot;Form received .&quot; + user.toString());</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;// We save the user:</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;userDAO.create(user);</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp;// We redirect to other handler</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;ModelAndView modelAndView = new ModelAndView(&quot;redirect:/users&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp;Map&lt;String, Object&gt; model = modelAndView.getModel();</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp;return new ModelAndView(&quot;redirect:/users&quot;, model);&nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp; &nbsp; &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;﻿ &nbsp;</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">﻿ &nbsp;}</span></div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Mejor que eches un ojo al proyecto completo <a href="http://code.google.com/p/erps-2dam-4vientos/source/browse/trunk/jomework/">que est&aacute; alojado en googlecode</a></div>

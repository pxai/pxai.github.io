---
layout: post
title: "Midlet:  cargando una imagen" 
date: 2011-05-31 09:44:09 
categories: coding
---
<p>
	El archivo est&aacute; en formato jpg y se copia dentro de src. A partir de ah&iacute; el empaquetador lo guarda y desde el programa le hacemos referencia con una barra por delante.</p>
<p>
	/*<br />
	&nbsp;* Spongebob<br />
	&nbsp;* Midlet que muestra una imagen<br />
	&nbsp;*/<br />
	package hello;<br />
	<br />
	import javax.microedition.midlet.*;<br />
	import javax.microedition.lcdui.*;<br />
	import java.io.*;<br />
	<br />
	public class Spongebob extends MIDlet implements CommandListener {<br />
	&nbsp;&nbsp;&nbsp; private Command exitCommand;<br />
	&nbsp;&nbsp;&nbsp; private Display pantalla;<br />
	&nbsp;&nbsp;&nbsp; private ImageCanvas screen;<br />
	<br />
	&nbsp;&nbsp;&nbsp; public Spongebob () {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Tomamos la pantalla<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pantalla = Display.getDisplay(this);<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Creamos el comando para salir<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exitCommand = new Command(&quot;Exit&quot;, Command.EXIT, 2);<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Asociamos a Screen nuestro Canvas especial<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; screen = new ImageCanvas();<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Establecemos el comando para salir<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; screen.addCommand(exitCommand);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; screen.setCommandListener(this);<br />
	&nbsp;&nbsp;&nbsp; }<br />
	<br />
	&nbsp;&nbsp;&nbsp; /**<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * startApp<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * se ejecuta al inicio de la aplicaci&oacute;n<br />
	&nbsp;&nbsp;&nbsp;&nbsp; */<br />
	&nbsp;&nbsp;&nbsp; public void startApp() throws MIDletStateChangeException {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Establecemos el formulario en la pantalla<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pantalla.setCurrent(screen);<br />
	&nbsp;&nbsp;&nbsp; }<br />
	<br />
	&nbsp;&nbsp;&nbsp; /**<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * pauseApp<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * se ejecuta en caso de pausar la aplicaci&oacute;n<br />
	&nbsp;&nbsp;&nbsp;&nbsp; */<br />
	&nbsp;&nbsp;&nbsp; public void pauseApp() {<br />
	&nbsp;&nbsp;&nbsp; }<br />
	<br />
	&nbsp;&nbsp;&nbsp; /**<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * destroyApp<br />
	&nbsp;&nbsp;&nbsp;&nbsp; * se ejecuta al terminar la aplicaci&oacute;n<br />
	&nbsp;&nbsp;&nbsp;&nbsp; */<br />
	&nbsp;&nbsp;&nbsp; public void destroyApp(boolean unconditional) {<br />
	&nbsp;&nbsp;&nbsp; }<br />
	<br />
	&nbsp;&nbsp;&nbsp; public void commandAction(Command c, Displayable s) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (c == exitCommand) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destroyApp(false);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notifyDestroyed();<br />
	&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp; }<br />
	}<br />
	<br />
	class ImageCanvas extends Canvas&nbsp; {<br />
	<br />
	&nbsp;&nbsp;&nbsp; // Dentro de canvas debe existir esta funci&oacute;n<br />
	&nbsp;&nbsp;&nbsp; public void paint(Graphics g) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Image img = null;<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Pantalla blanca<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.setColor(255, 255, 255); // White<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //g.fillRect(0, 0, getWidth(), getHeight());<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Creamos la imagen<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Atenci&oacute;n, el fichero de imagen est&aacute; en src<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // y as&iacute; se lo indico al interfaz del sdk<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; img = Image.createImage(&quot;/bob.jpg&quot;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (IOException ioex) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println(&quot;Error loading image: &quot; + ioex.getMessage());<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Metemos la imagen<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.drawImage(img, getWidth() / 2, getHeight() / 2,<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Graphics.HCENTER | Graphics.VCENTER);<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Preparamos la fuente<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Font f = Font.getFont(Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_MEDIUM);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.setFont(f);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Las letras en blanco...<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.setColor(255, 255, 255);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.drawString(&quot;Spongebob rulez&quot;, getWidth() / 2, 0,Graphics.HCENTER | Graphics.TOP);<br />
	<br />
	&nbsp;&nbsp;&nbsp; }<br />
	}</p>
